# Extract purchase orders

**Source:** https://docs.zenoti.com/recipes

---

> This recipe takes you through a python code example to create an opportunity in the Zenoti sales module for a lead you generate from external applications.

## Steps

### Step 1

Prerequisites and notes

### Step 2

Get access token

### Step 3

Search if the lead has a guest profile in Zenoti

### Step 4

Create a guest profile if lead doen't have one already

### Step 5

Retrieve the list of employees to assign this opportunity

### Step 6

Create an opportunity for this lead in Zenoti

### Step 7

Add a note to the created opportunity

### Step 8

Log the opporutnity details created

### Step 9

ðŸ¦‰
Create an opportunity in sales module

This recipe takes you through a python code example to create an opportunity in the Zenoti sales module for a lead you generate from external applications.

8 steps
Open Recipe

### Step 10

8 steps

### Step 11

ðŸ¦‰
Sale of a membership

This recipe takes you through a python code example to sell a membership to a guest and list all his purchased memberships in the Zenoti.

11 steps
Open Recipe

### Step 12

11 steps

### Step 13

ðŸ¦‰
Sale of a package

This recipe takes you through a python code example to sell a package to a guest and list all his purchased packages in the Zenoti.

10 steps
Open Recipe

### Step 14

10 steps

### Step 15

ðŸ¦‰
Sale of a gift card

This recipe takes you through a python code example to sell a gift card to a guest and list all his purchased gift cards in the Zenoti.

9 steps
Open Recipe

### Step 16

9 steps

### Step 17

ðŸ¦‰
Google ADs Offline Conversion

This recipe would take you through a Python code example to help track off-line conversions from your Google Ads. (Note: This recipe would work as a middleware and NOT as a stand-alone application)

9 steps
Open Recipe

### Step 18

9 steps

### Step 19

ðŸ¦‰
Extract purchase orders

This recipe would take you through a Python code example to help extract the purchase orders created in Zenoti in a pre-defined format to facilitate procurement of inventory (Note: This recipe would work as a middleware and NOT as a stand-alone application)

6 steps
Open Recipe

### Step 20

6 steps

### Step 21

ðŸ¦‰
Employee profiles management

This recipe will take you through a Python code example for Employee Management operations - Create the employee, create/update employee schedules. calculate their commissions. (This recipe would work as a middleware and NOT as a stand-alone application.)

14 steps
Open Recipe

### Step 22

14 steps

### Step 23

ðŸ¦‰
Online booking workflow for guests

This recipe will use a Python code example to help build an online booking workflow. (Note: This recipe would work as a middleware and NOT as a stand-alone application)

14 steps
Open Recipe

### Step 24

14 steps

### Step 25

1. Prerequisites and notes

This sample request uses Python's requests and JSON packages to handle the HTTP request and to manage the response data as JSON objects.

Next
2. Get access token

Make a API call to get an access token and store it in a variable for subsequent API calls.

3. Search if the lead has a guest profile in Zenoti

Retrieve centers in your account and select the applicable center. Then, search the zenoti guest profiles in your account to check if the lead already has a guest profile or not

4. Create a guest profile if lead doen't have one already

Create a guest profile for the lead only if there is no corresponding guest profile for him already in the zenoti system.

5. Retrieve the list of employees to assign this opportunity

Retrieve the list of employees working in this location so that this opportunity can be assigned to a specific selected employee.

6. Create an opportunity for this lead in Zenoti

Create an opportunity in the zenoti sales module for this lead using the guest profile details retrieved from either of the previous steps

7. Add a note to the created opportunity

Add relevant notes to the opportunity that was created in the previous step.

8. Log the opporutnity details created

Print the opportunity details response in the console.

### Step 26

1. Prerequisites and notes

This sample request uses Python's requests and JSON packages to handle the HTTP request and to manage the response data as JSON objects.

Next
2. Get access token

Make a API call to get an access token and store it in a variable for subsequent API calls.

3. Search if the lead has a guest profile in Zenoti

Retrieve centers in your account and select the applicable center. Then, search the zenoti guest profiles in your account to check if the lead already has a guest profile or not

4. Create a guest profile if lead doen't have one already

Create a guest profile for the lead only if there is no corresponding guest profile for him already in the zenoti system.

5. Retrieve the list of employees to assign this opportunity

Retrieve the list of employees working in this location so that this opportunity can be assigned to a specific selected employee.

6. Create an opportunity for this lead in Zenoti

Create an opportunity in the zenoti sales module for this lead using the guest profile details retrieved from either of the previous steps

7. Add a note to the created opportunity

Add relevant notes to the opportunity that was created in the previous step.

8. Log the opporutnity details created

Print the opportunity details response in the console.

### Step 27

1. Prerequisites and notes

This sample request uses Python's requests and JSON packages to handle the HTTP request and to manage the response data as JSON objects.

Next

### Step 28

1. Prerequisites and notes

### Step 29

1. Prerequisites and notes

### Step 30

This sample request uses Python's requests and JSON packages to handle the HTTP request and to manage the response data as JSON objects.

### Step 31

This sample request uses Python's requests and JSON packages to handle the HTTP request and to manage the response data as JSON objects.

### Step 34

2. Get access token

Make a API call to get an access token and store it in a variable for subsequent API calls.

### Step 35

2. Get access token

### Step 36

2. Get access token

### Step 37

Make a API call to get an access token and store it in a variable for subsequent API calls.

### Step 38

Make a API call to get an access token and store it in a variable for subsequent API calls.

### Step 39

3. Search if the lead has a guest profile in Zenoti

Retrieve centers in your account and select the applicable center. Then, search the zenoti guest profiles in your account to check if the lead already has a guest profile or not

### Step 40

3. Search if the lead has a guest profile in Zenoti

### Step 41

3. Search if the lead has a guest profile in Zenoti

### Step 42

Retrieve centers in your account and select the applicable center. Then, search the zenoti guest profiles in your account to check if the lead already has a guest profile or not

### Step 43

Retrieve centers in your account and select the applicable center. Then, search the zenoti guest profiles in your account to check if the lead already has a guest profile or not

### Step 44

4. Create a guest profile if lead doen't have one already

Create a guest profile for the lead only if there is no corresponding guest profile for him already in the zenoti system.

### Step 45

4. Create a guest profile if lead doen't have one already

### Step 46

4. Create a guest profile if lead doen't have one already

### Step 47

Create a guest profile for the lead only if there is no corresponding guest profile for him already in the zenoti system.

### Step 48

Create a guest profile for the lead only if there is no corresponding guest profile for him already in the zenoti system.

### Step 49

5. Retrieve the list of employees to assign this opportunity

Retrieve the list of employees working in this location so that this opportunity can be assigned to a specific selected employee.

### Step 50

5. Retrieve the list of employees to assign this opportunity

### Step 51

5. Retrieve the list of employees to assign this opportunity

### Step 52

Retrieve the list of employees working in this location so that this opportunity can be assigned to a specific selected employee.

### Step 53

Retrieve the list of employees working in this location so that this opportunity can be assigned to a specific selected employee.

### Step 54

6. Create an opportunity for this lead in Zenoti

Create an opportunity in the zenoti sales module for this lead using the guest profile details retrieved from either of the previous steps

### Step 55

6. Create an opportunity for this lead in Zenoti

### Step 56

6. Create an opportunity for this lead in Zenoti

### Step 57

Create an opportunity in the zenoti sales module for this lead using the guest profile details retrieved from either of the previous steps

### Step 58

Create an opportunity in the zenoti sales module for this lead using the guest profile details retrieved from either of the previous steps

### Step 59

7. Add a note to the created opportunity

Add relevant notes to the opportunity that was created in the previous step.

### Step 60

7. Add a note to the created opportunity

### Step 61

7. Add a note to the created opportunity

### Step 62

Add relevant notes to the opportunity that was created in the previous step.

### Step 63

Add relevant notes to the opportunity that was created in the previous step.

### Step 64

8. Log the opporutnity details created

Print the opportunity details response in the console.

### Step 65

8. Log the opporutnity details created

### Step 66

8. Log the opporutnity details created

### Step 67

Print the opportunity details response in the console.

### Step 68

Print the opportunity details response in the console.

## Python Implementation

```python
1
import requests
2
import json
3
â€‹
4
#configuration
5
api_url = "api.zenoti.com"
6
account_name = "demo"
7
user_name = "zenotidemo@zenoti.com"
8
password = "Support@zenoti1"
9
grantType = "password"
10
app_id = "FDBB0D9F-F885-4A1C-B01A-118E3E42720A"
11
app_secret = "4e12bcc0139c4b4593a93d6c6f7c5c9c93eed46ce1b34b8abb00acf5cdf6d0ce"
12
device_id = "FDBB0D9F-F885-4A1C-B01A-118E3E42720A"
13
â€‹
14
#Generate access token
15
token_request_body = json.dumps(({
16
    "account_name": "{}".format(account_name),
17
    "user_name": "{}".format(user_name),
18
    "password": "{}".format(password),
19
    "grant_type": "{}".format(grantType),
20
    "app_id": "{}".format(app_id),
21
    "app_secret": "{}".format(app_secret),
22
    "device_id": "{}".format(device_id)
23
}))
24
â€‹
25
token_request_headers = {
```

